<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title> ACSL | MAPS Trails History Page</title>

    <!-- Custom fonts for this template-->
    <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="../css/sb-admin-2.min.css" rel="stylesheet">
    <style type="text/css">
        /* html { 
            height: 100%; 
        }
        body { 
            height: 100%;
            font-family:Verdana,sans-serif,Arial;
            color:#000;
            margin: 0; 
            font-size:14px;
            padding: 0; 
        } */
        #map1{
            position: absolute;
            left: 2px; top: 2px; 
            right: 2px; bottom: 2px; 
            border: 1px solid #cccccc; 
        }
        .map-block{
            min-height: 600px;
        }
      
    </style>
       <!-- Bootstrap core JavaScript-->
       <script src="../vendor/jquery/jquery.min.js"></script>
       <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
   
    <script src="https://apis.mapmyindia.com/advancedmaps/v1/709ba551f47efb30edcb5bd85cc66558/map_load?v=1.5&plugin=polylinedecorator,path.drag"></script>
</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">
    
        <div id="sidebar"></div>
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">
                <div id="toolbar"></div>
                <!-- Topbar -->
               
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <div class="align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">Trails</h1>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                              <li class="breadcrumb-item"><a href="#">Home</a></li>
                              <li class="breadcrumb-item"><a href="#">Trails</a></li>
                              <li class="breadcrumb-item active" aria-current="page">Trails</li>
                            </ol>
                          </nav>
                        <p class="mb-4">Device Location History data.</p>
                        <!-- <a href="/live-maps.html" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                                class="fas fa-download fa-sm text-white-50"></i> Visit Tracking</a> -->
                    </div>

                    <!-- Content Row -->
                    <div class="card position-relative">
                        <!-- <div class="row">
                            <h5 class="card-header">Featured</h5>
                            <div class="card-body">
                              <h5 class="card-title">Special title treatment</h5>
                              <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                              <a href="#" class="btn btn-primary">Go somewhere</a>
                            </div>
                          </div> -->
                          <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">Total Count :  <span className="btn btn-primary btn-sm">1</span></h6>
                        </div>
                        <div class="card-body ">
                            <div class="row map-block">
                                <div class="col-lg-4">
                                     <div class="block">
                                        <form>
                                            <div class="form-group">
                                                <label for="Trail">Select Trail Type</label>
                                                <select class="form-control" id="Trail">
                                                  <option>In drive</option>
                                                  <option>Idle</option>
                                                  <option>Stopped</option>
                                                  
                                                </select>
                                              </div>

                                              <div class="form-group">
                                                <label for="date">Date </label>
                                                <input type="date" id="daterange" class="form-control" name="daterange"/>
                                              </div>
                                            <div class="form-group">
                                              <label for="device">Select Device</label>
                                              <select class="form-control" id="device" name="device">
                                                <option>Alpha 1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                              </select>
                                            </div>
                                            <div class="form-group">
                                              <button type="submit" class="btn btn-primary">Track</button>
                                            </div>
                                            
                                        </form>
                                     </div>

                                     <div class="block">
                                        <div class="card shadow mb-4">
                                            <!-- Card Header - Accordion -->
                                            <a href="#collapseCardExample" class="d-block card-header py-3" data-toggle="collapse"
                                                role="button" aria-expanded="true" aria-controls="collapseCardExample">
                                                <h6 class="m-0 font-weight-bold text-primary">Active Device Info</h6>
                                            </a>
                                            <!-- Card Content - Collapse -->
                                            <div class="collapse show" id="collapseCardExample">
                                                <div class="card-body">
                                                    <ul>
                                                    <li class="list-group-item"><strong>Drone ID :</strong> Alpha1</li>
                                                    <li class="list-group-item"><strong>Model :</strong> Model - 01</li>
                                                    <li class="list-group-item"><strong>Address :</strong> No 6, xyx street, xyz - 6410120</li>
                                                    <li class="list-group-item"><strong>Drone type :</strong>MultiRotor</li>
                                                    <li class="list-group-item"><strong>Status :</strong>  &nbsp;   
                                                         <span class="card-link font-weight-bold text-info text-uppercase">Moving</span>
                                                    
                                                    </li>
                                                  </ul>
                                                </div>
                                            </div>
                                        </div>
                                     </div>
                                     
                                </div>
        
                                <!-- Fade In Utility -->
                                <div class="col-lg-8">
                                    <div id="map1"></div>
                                </div>
                            </div>
                        </div>     
                          
                    </div>
                    <!-- <div class="row">
                       
                    
                        <div class="col-lg-6">

                            <div class="btn-div" ><button onclick="drawCarMarkerOnPolyline()" id="visible" >Redraw Polyline</button></div>
                            <div class="btn-div" ><button onclick="drawArrowOnPolyline()" id="visible" >Draw Arrow on Polyline</button></div>
                            <div class="btn-div" ><button onclick="drawRepeatedPatternOnPolyline()" id="visible" >Draw Repeated Pattern</button></div>
                    
                            <div class="btn-div" ><button onclick="removePolyline()" id="visible" >Remove Polyline</button></div>

                        </div>

                    
                        <div class="col-lg-6">
                            
                        </div>

                    </div> -->

                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Your Website 2020</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>


 
    <!-- Core plugin JavaScript-->
    <script src="../vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="../js/sb-admin-2.min.js"></script>
    <script>
          $("#header").load("header.html"); 
          $("#toolbar").load("toolbar.html");
          $("#sidebar").load("sidebar.html"); 
         // $("#footer").load("footer.html"); 
        var map1 = null;
        var poly = [];
        var decorator;
        var line;
        var center = new L.LatLng(28.549948, 77.268241);
        var interval = 0;
        var pp = [[28.56731, 77.346355], [28.567074, 77.346022], [28.566584, 77.345378], [28.565689, 77.344144], [28.563503, 77.341312], [28.563277, 77.341076], [28.562636, 77.340186],
            [28.561986, 77.339328], [28.561788, 77.338942], [28.561675, 77.338695], [28.561524, 77.33833], [28.56142, 77.338094], [28.561166, 77.337472], [28.560817, 77.336925],
            [28.560515, 77.335981], [28.560458, 77.33582], [28.560204, 77.33509], [28.559818, 77.33406], [28.558046, 77.329629], [28.557518, 77.328427], [28.556698, 77.326292],
            [28.55617, 77.325123], [28.555473, 77.323878], [28.555256, 77.323739], [28.555105, 77.323675], [28.554973, 77.323664], [28.554813, 77.323685], [28.554681, 77.323749],
            [28.554577, 77.323824], [28.554464, 77.323963], [28.554407, 77.324124], [28.554388, 77.324274], [28.554397, 77.324424], [28.554435, 77.324585], [28.55451, 77.324724],
            [28.554642, 77.324853], [28.555198, 77.325261], [28.555462, 77.3254], [28.555632, 77.325443], [28.55599, 77.325368], [28.55681, 77.324295], [28.557922, 77.322879],
            [28.558516, 77.321892], [28.55878, 77.321388], [28.559289, 77.320412], [28.55944, 77.320122], [28.560062, 77.318867], [28.560486, 77.31818], [28.56107, 77.317622],
            [28.561503, 77.317407], [28.562408, 77.316989], [28.564575, 77.315466], [28.569183, 77.312097], [28.570464, 77.311088], [28.570831, 77.310798], [28.573921, 77.308481],
            [28.575551, 77.307354], [28.579329, 77.304554], [28.581308, 77.303127], [28.58177, 77.302784], [28.581949, 77.302655], [28.582637, 77.302129], [28.583014, 77.301839],
            [28.583532, 77.301453], [28.584022, 77.301088], [28.58486, 77.30023], [28.585934, 77.298621], [28.58616, 77.298396], [28.587036, 77.297742], [28.588685, 77.296916]];
        window.onload = function () {

            map1 = new MapmyIndia.Map('map1', {
                center: center,
                editable: true,
                zoomControl: true,
                hybrid: true
            });

            //draw polyline
            drawCarMarkerOnPolyline();
        }

        function drawCarMarkerOnPolyline() {
            removePolyline();
            var offset = 0; //intial offset value
            var w = 14, h = 33;
            //Polyline css
            var linecss = {
                color: '#234FB6',
                weight: 3,
                opacity: 1
            };
            line = L.polyline(pp, linecss).addTo(map1); //add polyline on map1
            decorator = L.polylineDecorator(line).addTo(map1); //create a polyline decorator instance.

            //offset and repeat can be each defined as a number,in pixels,or in percentage of the line's length,as a string 
            interval = window.setInterval(function () {
                decorator.setPatterns([{
                        offset: offset + '%', //Offset value for first pattern symbol,from the start point of the line. Default is 0.
                        repeat: 0, //repeat pattern at every x offset. 0 means no repeat.
                        //Symbol type.
                        symbol: L.Symbol.marker({
                            rotate: true, //move marker along the line. false value may cause the custom marker to shift away from a curved polyline. Default is false. 
                            markerOptions: {
                                icon: L.icon({
                                    iconUrl: 'img/car.png',
                                    iconAnchor: [w / 2, h / 2], //Handles the marker anchor point. For a correct anchor point [ImageWidth/2,ImageHeight/2]
                                    iconSize: [14, 33]
                                })
                            }
                        })
                    }
                ]);
                if ((offset += 0.03) > 100) //Sets offset. Smaller the value smoother the movement.
                    offset = 0;
            }, 10); //Time in ms. Increases/decreases the speed of the marker movement on decrement/increment of 1 respectively. values should not be less than 1.
            poly.push(line);
            poly.push(decorator);
            map1.fitBounds(line.getBounds());
        }
        function drawArrowOnPolyline() {
            removePolyline();
            var offset = 0; //intial offset value

            //Polyline css
            var linecss = {
                color: '#fd4000',
                weight: 3,
                opacity: 1
            };
            line = L.polyline(pp, linecss).addTo(map1); //add polyline on map1
            decorator = L.polylineDecorator(line).addTo(map1); //create a polyline decorator instance.
            //offset and repeat can be each defined as a number,in pixels,or in percentage of the line's length,as a string 
            interval = window.setInterval(function () {
                decorator.setPatterns([{
                        offset: offset + "%", //Start first marker from x offset.
                        repeat: 0, //repeat market at every x offset. 0 means no repeat.
                        symbol: L.Symbol.arrowHead({
                            pixelSize: 20, //Size of arrow image
                            headAngle: 60, //Increases/decreases arrow angel. Default is 60.
                            polygon: true, //if set to false an arrow is added else a triangle shape arrow is added. Default is true.
                            pathOptions: {
                                color: '#303030', //arrow color
                                fillOpacity: 0, //0 for no fill
                                weight: 4 // arrow line width
                            }
                        })
                    }
                ]);
                if ((offset += 0.03) > 100) //Sets offset. Smaller the value smoother the movement.
                    offset = 0;
            }, 10); //Time in ms. Increases/decreases the speed of the marker movement on decrement/increment of 1 respectively. values should not be less than 1.
            poly.push(line);
            poly.push(decorator);
            map1.fitBounds(line.getBounds());
        }
        function drawRepeatedPatternOnPolyline() {
            removePolyline();
            var offset = 0; //intial offset value

            //Polyline css
            var linecss = {
                color: '#fd4000',
                weight: 3,
                opacity: 1
            };
            line = L.polyline(pp, linecss).addTo(map1); //add polyline on map1
            decorator = L.polylineDecorator(line).addTo(map1); //create a polyline decorator instance.
            //offset and repeat can be each defined as a number,in pixels,or in percentage of the line's length,as a string 
            interval = window.setInterval(function () {
                decorator.setPatterns([{
                        offset: offset + "%", //Start first marker from x offset.
                        repeat: 100, //repeat market at every 100 offset.
                        symbol: L.Symbol.arrowHead({
                            pixelSize: 20, //Size of arrow image
                            headAngle: 60, //Increases/decreases arrow angel. Default is 60.
                            polygon: true, //if set to false an arrow is added else a triangle shape arrow is added. Default is true.
                            pathOptions: {
                                color: '#303030', //arrow color
                                fillOpacity: 0, //0 for no fill
                                weight: 4 // arrow line width
                            }
                        })
                    }
                ]);
                if ((offset += 0.03) > 100) //Sets offset. Smaller the value smoother the movement.
                    offset = 0;
            }, 10); //Time in ms. Increases/decreases the speed of the marker movement on decrement/increment of 1 respectively. values should not be less than 1.
            poly.push(line);
            poly.push(decorator);
            map1.fitBounds(line.getBounds());
        }

        var removePolyline = function () {
            var polylength = poly.length;
            if (polylength > 0) {
                for (var i = 0; i < polylength; i++) {
                    if (poly[i] !== undefined) {
                        map1.removeLayer(poly[i]);
                    }
                }
                poly = new Array();
                window.clearInterval(interval);
            }
        }
    </script>
</body>

</html>